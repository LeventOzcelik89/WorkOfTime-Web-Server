@{
    ViewBag.Title = "Titan Cihaz Listesi";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var data = (Infoline.WorkOfTime.BusinessAccess.Business.Product.IndexData)ViewBag.data;
}

<script>
    function refresh() {
        GetDataFromUrl("/PRD/PRD_TitanDeviceActivated/Insert", {}, function (data) {
            console.log(data);
        });
    }
    function grid_change(e) {
        var selectedCells = this.select();
        var id = $(selectedCells).find("td")[0];
        var findText = $(id).text();
        if (findText == "00000000-0000-0000-0000-000000000000") {
            $("#detailButton").hide();
        }
        else {
            $("#detailButton").show();
        }
    }
    function onGridChange() {
        var grid = $("#PRD_TitanDeviceActivated").data("kendoGrid");
        grid.bind("change", grid_change);
    }
    $(document).on("ready", document, function () {
        onGridChange();
    });
</script>
<div class="row">
    <div class="col-sm-3">
        <div class="widget yellow-bg p-lg text-center">
            <i class="fa fa-mobile-phone fa-3x"></i>
            <h1 class="m-xs">@data.All</h1>
            <h3 class="font-bold no-margins">
                Toplam Cihaz Sayısı
            </h3>
        </div>
    </div>
    <div class="col-sm-3">
        <div class="widget blue-bg p-lg text-center">
            <i class="fa fa-calendar fa-3x"></i>
            <h1 class="m-xs">@data.Today</h1>
            <h3 class="font-bold no-margins">
                Bugün Aktif Olan Cihaz Sayısı
            </h3>
        </div>
    </div>
    <div class="col-sm-3">
        <div class="widget lazur-bg p-lg text-center">
            <i class="fa fa-level-up fa-3x"></i>
            <h1 class="m-xs">@data.Seven</h1>
            <h3 class="font-bold no-margins">
                Son  7 Günde Aktif Olan Cihaz Sayısı
            </h3>
        </div>
    </div>
    <div class="col-sm-3">
        <div class="widget navy-bg p-lg text-center">
            <i class="fa fa-arrow-up fa-3x"></i>
            <h1 class="m-xs">@data.Month</h1>
            <h3 class="font-bold no-margins">
                Son  30 Günde Aktif Olan Cihaz Sayısı
            </h3>
        </div>
    </div>
</div>
@(Html.Akilli()
    .Grid<Infoline.WorkOfTime.BusinessData.VWPRD_TitanDeviceActivated>("PRD_TitanDeviceActivated")
    .DataSource(x => x.Ajax().Read(r => r.Action("DataSource", "PRD_TitanDeviceActivated", new { area = "PRD" })).PageSize(25))
    .Columns(x =>
    {
        x.Bound(y => y.id).Hidden(true);
        x.Bound(y => y.productId_Title).Title("Cihaz Adı").Width(180);
        x.Bound(y => y.CreatedOfTitan).Title("Cihazın Açılma Tarihi").Width(180).Format(Extensions.DateFormatFull(true));
        x.Bound(y => y.InvetoryId_Code).Title("Envanter Kodu").Width(180);
        x.Bound(y => y.SerialNumber).Title("Seri Numarası").Width(180);
    })
    .Filterable()
    .Selectable(x => x.Mode(GridSelectionMode.Single)).ToolBar(x => {
        x.Custom().Text("<i  data-original-title='Envanter Detayı' class='fa fa-info-circle'></i>").HtmlAttributes(new Dictionary<string, object>() { { "data-show", "single" }, { "data-modal", "false" }, { "data-blank", "" }, { "data-default", "" } ,{"id", "detailButton" } }).Url(Url.Action("Detail", "VWPRD_Inventory", new { area = "PRD"}));
    }
    ).Events(x=>x.DataBinding("refresh")))
