@{
    ViewBag.Title = "Hakediş Listesi";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var userStatus = (PageSecurity)Session["userStatus"];
    var data = ViewBag.data;
    var accountData = ViewBag.dataAccount;
    var companyData = Model.CompanyModel(userStatus);
    var account = Model.AccountModel(userStatus);
}
@if (userStatus.AuthorizedRoles.Contains(new Guid(SHRoles.HakEdisBayiPersoneli)))
{
    <div class="row">
        <div class="col-sm-12 col-xl-12 col-md-12 col-lg-12">
            @if (!string.IsNullOrEmpty(data))
            {
                <div class="alert alert-danger">
                    <h4 class="text-center"><b>Bayinize Ait Eksik Bilgiler Var!</b></h4>
                    <p class="text-center">@data Eksik alanları tamamlamak için <a style="cursor:pointer" data-modal="true" data-task="Insert" data-href="@Url.Action("Update", "VWCMP_Company", new { area = "CMP",id = companyData.id })">lütfen tıklayınız.</a></p>
                </div>
            }
        </div>
        <div class="col-sm-12 col-xl-12 col-md-12 col-lg-12">
            @if (account == null)
            {
                <div class="alert alert-danger">
                    <h4 class="text-center"><b>Bayinize Ait Eksik Banka Bilgileri Var!</b></h4>
                    <p class="text-center">@accountData Eksik alanları tamamlamak için <a style="cursor:pointer" data-modal="true" data-task="Insert" data-href="@Url.Action("Insert", "VWPA_Account", new { area = "PA",dataTable = "CustomerUser" , dataId = companyData.id, type = (int)EnumPA_AccountType.Banka })">lütfen tıklayınız.</a></p>
                </div>
            }
        </div>
    </div>
}
<div class="row">
    <div class="col-sm-2">
        <div class="ibox">
            <div class="ibox-content mailbox-content">
                <div class="file-manager">
                    <a class="btn btn-block btn-success" data-task="Insert" data-href="/PRD/VWPRD_EntegrationImport/Insert" data-modal="true" data-method="get">
                        <i class='fa fa-plus-circle' data-original-title='Hakediş Verisi Bildir'>

                        </i>   Yeni Hakediş Bildir
                    </a>
                    <a href="#" style="width:100%" data-task="Insert" data-import="Excel" title="Excel'den Hakediş Bildir" class="btn btn-primary btn-block"
                       data-properties="@ExcelHelper.GetSchema(typeof(PRD_EntegrationImportExcel))" data-gridRefresh="VWPRD_EntegrationImport" data-post="@Url.Action("Import","VWPRD_EntegrationImport", new { area = "PRD" })">
                        <i class="fa fa-file-excel-o"></i> Excel'den Hakediş Bildir
                    </a>

                    <a download="" href="~/Content/SampleExcels/bounty_template.xlsx" class="btn btn-block btn-info" data-original-title="Örnek Excel İndir">
                        <i class="fa fa-download"></i> Örnek Excel İndir
                    </a>
                </div>
            </div>
        </div>

    </div>
    <div class="col-sm-10">
        @(Html.Akilli()
    .Grid<Infoline.WorkOfTime.BusinessData.VWPRD_EntegrationImport>("VWPRD_EntegrationImport")
    .DataSource(x => x.Ajax().Read(r => r.Action("DataSource", "VWPRD_EntegrationImport", new { area = "PRD" })).PageSize(25))
    .Columns(x =>
    {

        x.Bound(y => y.company_Name).Title("Bayi Adı").Width(200);
        x.Bound(y => y.customerCode).Title("Bayi Kodu").Width(100);
        x.Bound(y => y.distributor_Title).Title("Distribütör Adı").Width(200);
        x.Bound(y => y.distributorCode).Title("Distribütör Kodu").Width(100);
        x.Bound(y => y.productId_Title).Title("Ürün Modeli").Width(150);
        x.Bound(y => y.imei).Title("Imei").Width(100);
    })
    .Groupable()

    .Scrollable(x=>x.Height(650))
    .ToolBar(x =>
    {
        x.Custom().Text("<i class='fa fa-edit' data-original-title='Hakediş Verisi Düzenle'></i> ").HtmlAttributes(new Dictionary<string, object>() { { "data-show", "single" }, { "data-method", "GET" } }).Url(Url.Action("Update", "VWPRD_EntegrationImport", new { area = "PRD" }));
        x.Custom().Text("<i class='fa fa-trash'  data-original-title='Hakediş Verisi Sil'></i>").HtmlAttributes(new Dictionary<string, object>() { { "data-ask", "" } }).Url(Url.Action("Delete", "VWPRD_EntegrationImport", new { area = "PRD" }));
    }))
    </div>
</div>

